{"ast":null,"code":"import _slicedToArray from\"/Users/parth/Desktop/web-dev/social-media-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from\"react\";import CreateComment from\"../create-comment/CreateComment\";import classes from\"./Post.module.css\";import MessageIcon from\"@material-ui/icons/Message\";import FavoriteIcon from\"@material-ui/icons/Favorite\";import FavoriteBorderIcon from\"@material-ui/icons/FavoriteBorder\";import{db}from\"../../../firebase/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Post=function Post(_ref){var id=_ref.id,profileUrl=_ref.profileUrl,username=_ref.username,imageUrl=_ref.imageUrl,caption=_ref.caption,comments=_ref.comments,user=_ref.user,timestamp=_ref.timestamp,likes=_ref.likes;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showCommentInput=_useState2[0],setShowCommentInput=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),likeClicked=_useState4[0],setLikeClicked=_useState4[1];var _useState5=useState(likes),_useState6=_slicedToArray(_useState5,2),likeCount=_useState6[0],setLikeCount=_useState6[1];var onClickCommentInput=function onClickCommentInput(){setShowCommentInput(function(prevState){return!prevState;});};var onLikeClicked=function onLikeClicked(){setLikeClicked(true);if(likeCount>=1){db.collection(\"posts\").doc(id).update({likes:likeCount}).then(function(){console.log(likeCount);console.log(\"like added\");}).catch(function(error){return console.log(error.message);});}};return/*#__PURE__*/_jsxs(\"div\",{className:classes.post_container,children:[/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"posted_img\",className:classes.post_img}),/*#__PURE__*/_jsxs(\"div\",{className:classes.caption_container,children:[/*#__PURE__*/_jsx(\"p\",{className:classes.poster_username,children:username}),/*#__PURE__*/_jsx(\"p\",{className:classes.poster_caption,children:caption})]}),comments?comments.map(function(comment){return/*#__PURE__*/_jsxs(\"div\",{className:classes.post_comments,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.comment_username,children:comment.username}),/*#__PURE__*/_jsx(\"div\",{className:classes.comment_comment,children:comment.comment})]});}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.msg_icon_container,children:[/*#__PURE__*/_jsx(MessageIcon,{className:classes.msg_icon,onClick:onClickCommentInput}),/*#__PURE__*/_jsx(\"div\",{className:classes.heart_icon,onClick:onLikeClicked,children:likeClicked?/*#__PURE__*/_jsx(FavoriteIcon,{onClick:function onClick(){return setLikeCount(likeCount+1);},style:{fill:\"red\"}}):/*#__PURE__*/_jsx(FavoriteBorderIcon,{})}),/*#__PURE__*/_jsx(\"p\",{className:classes.like,children:\"\".concat(likeCount,\" \").concat(likeCount===0?\"like\":likeCount===1?\"like\":\"likes\")})]}),showCommentInput&&/*#__PURE__*/_jsx(CreateComment,{id:id,comments:comments,onClickCommentInput:onClickCommentInput},id)]});};export default Post;","map":{"version":3,"sources":["/Users/parth/Desktop/web-dev/social-media-app/src/components/feed/post/Post.js"],"names":["React","Fragment","useState","useEffect","CreateComment","classes","MessageIcon","FavoriteIcon","FavoriteBorderIcon","db","Post","id","profileUrl","username","imageUrl","caption","comments","user","timestamp","likes","showCommentInput","setShowCommentInput","likeClicked","setLikeClicked","likeCount","setLikeCount","onClickCommentInput","prevState","onLikeClicked","collection","doc","update","then","console","log","catch","error","message","post_container","post_img","caption_container","poster_username","poster_caption","map","comment","post_comments","comment_username","comment_comment","msg_icon_container","msg_icon","heart_icon","fill","like"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport CreateComment from \"../create-comment/CreateComment\";\nimport classes from \"./Post.module.css\";\nimport MessageIcon from \"@material-ui/icons/Message\";\nimport FavoriteIcon from \"@material-ui/icons/Favorite\";\nimport FavoriteBorderIcon from \"@material-ui/icons/FavoriteBorder\";\nimport { db } from \"../../../firebase/firebase\";\n\nconst Post = ({\n  id,\n  profileUrl,\n  username,\n  imageUrl,\n  caption,\n  comments,\n  user,\n  timestamp,\n  likes,\n}) => {\n  const [showCommentInput, setShowCommentInput] = useState(false);\n  const [likeClicked, setLikeClicked] = useState(false);\n  const [likeCount, setLikeCount] = useState(likes);\n\n  const onClickCommentInput = () => {\n    setShowCommentInput((prevState) => !prevState);\n  };\n\n  const onLikeClicked = () => {\n    setLikeClicked(true);\n\n    if (likeCount >= 1) {\n      db.collection(\"posts\")\n        .doc(id)\n        .update({\n          likes: likeCount,\n        })\n        .then(() => {\n          console.log(likeCount);\n          console.log(\"like added\");\n        })\n        .catch((error) => console.log(error.message));\n    }\n  };\n\n  return (\n    <div className={classes.post_container}>\n      <img src={imageUrl} alt=\"posted_img\" className={classes.post_img} />\n      <div className={classes.caption_container}>\n        <p className={classes.poster_username}>{username}</p>\n        <p className={classes.poster_caption}>{caption}</p>\n      </div>\n      {comments ? (\n        comments.map((comment) => (\n          <div className={classes.post_comments}>\n            <div className={classes.comment_username}>{comment.username}</div>\n            <div className={classes.comment_comment}>{comment.comment}</div>\n          </div>\n        ))\n      ) : (\n        <></>\n      )}\n\n      <div className={classes.msg_icon_container}>\n        <MessageIcon\n          className={classes.msg_icon}\n          onClick={onClickCommentInput}\n        />\n        <div className={classes.heart_icon} onClick={onLikeClicked}>\n          {likeClicked ? (\n            <FavoriteIcon\n              onClick={() => setLikeCount(likeCount + 1)}\n              style={{ fill: \"red\" }}\n            />\n          ) : (\n            <FavoriteBorderIcon />\n          )}\n        </div>\n        <p className={classes.like}>{`${likeCount} ${\n          likeCount === 0 ? \"like\" : likeCount === 1 ? \"like\" : \"likes\"\n        }`}</p>\n      </div>\n      {showCommentInput && (\n        <CreateComment\n          key={id}\n          id={id}\n          comments={comments}\n          onClickCommentInput={onClickCommentInput}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}